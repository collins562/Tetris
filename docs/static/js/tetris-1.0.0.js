!function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=92)}([function(t,e,n){var r=n(16);r(r.S,"Object",{setPrototypeOf:n(73).set})},function(t,e,n){var r=n(30)("wks"),o=n(23),i=n(4).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e,n){n(45)("asyncIterator")},function(t,e,n){"use strict";function r(t){var e=K[t]=L(N[I]);return e._k=t,e}function o(t,e){x(t);for(var n,r=S(e=j(e)),o=0,i=r.length;o<i;)$(t,n=r[o++],e[n]);return t}function i(t){var e=z.call(this,t=P(t,!0));return!(this===V&&f(K,t)&&!f(q,t))&&(!(e||!f(this,t)||!f(K,t)||f(this,G)&&this[G][t])||e)}function u(t,e){if(t=j(t),e=P(e,!0),t!==V||!f(K,e)||f(q,e)){var n=B(t,e);return!n||!f(K,e)||f(t,G)&&t[G][e]||(n.enumerable=!0),n}}function c(t){for(var e,n=M(j(t)),r=[],o=0;n.length>o;)f(K,e=n[o++])||e==G||e==y||r.push(e);return r}function a(t){for(var e,n=t===V,r=M(n?q:j(t)),o=[],i=0;r.length>i;)!f(K,e=r[i++])||n&&!f(V,e)||o.push(K[e]);return o}var s=n(4),f=n(14),l=n(10),p=n(16),h=n(17),y=n(65).KEY,v=n(15),d=n(30),b=n(32),m=n(23),g=n(1),k=n(46),w=n(45),S=n(66),O=n(70),x=n(5),_=n(6),j=n(21),P=n(33),C=n(24),L=n(39),E=n(72),R=n(40),T=n(9),A=n(29),B=R.f,D=T.f,M=E.f,N=s.Symbol,F=s.JSON,H=F&&F.stringify,I="prototype",G=g("_hidden"),W=g("toPrimitive"),z={}.propertyIsEnumerable,U=d("symbol-registry"),K=d("symbols"),q=d("op-symbols"),V=Object[I],Y="function"==typeof N,J=s.QObject,X=!J||!J[I]||!J[I].findChild,Q=l&&v(function(){return 7!=L(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=B(V,e);r&&delete V[e],D(t,e,n),r&&t!==V&&D(V,e,r)}:D,Z=Y&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},$=function(t,e,n){return t===V&&$(q,e,n),x(t),e=P(e,!0),x(n),f(K,e)?(n.enumerable?(f(t,G)&&t[G][e]&&(t[G][e]=!1),n=L(n,{enumerable:C(0,!1)})):(f(t,G)||D(t,G,C(1,{})),t[G][e]=!0),Q(t,e,n)):D(t,e,n)};Y||(h((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=m(0<arguments.length?arguments[0]:undefined),n=function(t){this===V&&n.call(q,t),f(this,G)&&f(this[G],e)&&(this[G][e]=!1),Q(this,e,C(1,t))};return l&&X&&Q(V,e,{configurable:!0,set:n}),r(e)})[I],"toString",function(){return this._k}),R.f=u,T.f=$,n(50).f=E.f=c,n(38).f=i,n(49).f=a,l&&!n(27)&&h(V,"propertyIsEnumerable",i,!0),k.f=function(t){return r(g(t))}),p(p.G+p.W+p.F*!Y,{Symbol:N});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)g(tt[et++]);for(var nt=A(g.store),rt=0;nt.length>rt;)w(nt[rt++]);p(p.S+p.F*!Y,"Symbol",{"for":function(t){return f(U,t+="")?U[t]:U[t]=N(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){X=!0},useSimple:function(){X=!1}}),p(p.S+p.F*!Y,"Object",{create:function(t,e){return e===undefined?L(t):o(L(t),e)},defineProperty:$,defineProperties:o,getOwnPropertyDescriptor:u,getOwnPropertyNames:c,getOwnPropertySymbols:a}),F&&p(p.S+p.F*(!Y||v(function(){var t=N();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(_(e)||t!==undefined)&&!Z(t))return O(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),r[1]=e,H.apply(F,r)}}),N[I][W]||n(18)(N[I],W,N[I].valueOf),b(N,"Symbol"),b(Math,"Math",!0),b(s.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return r});var i={},r=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t.key,this.callback=t.callback||function(){},this.begin=t.begin||100,this.interval=t.interval||50,this.once=t.once}return function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(e,[{key:"down",value:function(){var t=this;this.clearAll(),this.callback(function(){t.up()}),!0!==this.once&&(this.start=this.begin,this.loop())}},{key:"up",value:function(){clearTimeout(i[this.key]),i[this.key]=null}},{key:"loop",value:function(){var t=this;i[this.key]=setTimeout(function(){t.start=null,t.loop(),t.callback(function(){return t.up()})},this.start||this.interval)}},{key:"clearAll",value:function(){for(var t in i){i[t]&&(clearTimeout(i[t]),i[t]=null)}}}],[{key:"new",value:function(t){return new this(t)}}]),e}()},function(t,e,n){"use strict";var r=n(44),o={};o[n(1)("toStringTag")]="z",o+""!="[object z]"&&n(17)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var o=n(5),i=n(47),u=n(33),c=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(o(t),e=u(e,!0),o(n),i)try{return c(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";n(74);function r(t){n(17)(RegExp.prototype,c,t,!0)}var o=n(5),i=n(51),u=n(10),c="toString",a=/./[c];n(15)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?r(function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!u&&t instanceof RegExp?i.call(t):undefined)}):a.name!=c&&r(function(){return a.call(this)})},function(t,e,n){var r=Date.prototype,o="Invalid Date",i="toString",u=r[i],c=r.getTime;new Date(NaN)+""!=o&&n(17)(r,i,function(){var t=c.call(this);return t==t?u.call(this):o})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return c});n(57),n(58),n(11),n(12),n(8),n(2),n(3),n(22);function r(t){return function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function e(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function i(n,r,t,o){return n+t[0][0]<0||n+t[3][0]>=o.column||t.map(function(t){var e=r+t[1];return!(e<0||!o.board[e][n+t[0]].occupied)}).reduce(function(t,e){return t||e})},o=function o(t,e){var n=t.map(function(t){return t[e]});return Math.max.apply(Math,r(n))-Math.min.apply(Math,r(n))},u=function u(){var t=navigator.userAgent,e=/Android (\d+\.\d+)/.test(t),n=-1<t.indexOf("iPhone"),r=-1<t.indexOf("iPod"),o=-1<t.indexOf("iPad"),i=-1<t.indexOf("NokiaN");return e||n||r||o||i},c=function c(t,e){return t+Math.floor(Math.random()*(e-t+1))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var v=n(4),d=n(20),b=n(18),m=n(17),g=n(28),k="prototype",w=function(t,e,n){var r,o,i,u,c=t&w.F,a=t&w.G,s=t&w.S,f=t&w.P,l=t&w.B,p=a?v:s?v[e]||(v[e]={}):(v[e]||{})[k],h=a?d:d[e]||(d[e]={}),y=h[k]||(h[k]={});for(r in a&&(n=e),n)i=((o=!c&&p&&p[r]!==undefined)?p:n)[r],u=l&&o?g(i,v):f&&"function"==typeof i?g(Function.call,i):i,p&&m(p,r,i,t&w.U),h[r]!=i&&b(h,r,u),f&&y[r]!=i&&(y[r]=i)};v.core=d,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},function(t,e,n){var i=n(4),u=n(18),c=n(14),a=n(23)("src"),r=n(64),o="toString",s=(""+r).split(o);n(20).inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(c(n,"name")||u(n,"name",e)),t[e]!==n&&(o&&(c(n,a)||u(n,a,t[e]?""+t[e]:s.join(String(e)))),t===i?t[e]=n:r?t[e]?t[e]=n:u(t,e,n):(delete t[e],u(t,e,n)))})(Function.prototype,o,function(){return"function"==typeof this&&this[a]||r.call(this)})},function(t,e,n){var r=n(9),o=n(24);t.exports=n(10)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(16),c=n(39),a=n(25),s=n(5),f=n(6),o=n(15),l=n(75),p=(n(4).Reflect||{}).construct,h=o(function(){function t(){}return!(p(function(){},[],t)instanceof t)}),y=!o(function(){p(function(){})});r(r.S+r.F*(h||y),"Reflect",{construct:function(t,e){a(t),s(e);var n=arguments.length<3?t:a(arguments[2]);if(y&&!h)return p(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var o=n.prototype,i=c(f(o)?o:Object.prototype),u=Function.apply.call(t,i,e);return f(u)?u:i}})},function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(67),o=n(34);t.exports=function(t){return r(o(t))}},function(t,e,n){for(var r=n(63),o=n(29),i=n(17),u=n(4),c=n(18),a=n(26),s=n(1),f=s("iterator"),l=s("toStringTag"),p=a.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},y=o(h),v=0;v<y.length;v++){var d,b=y[v],m=h[b],g=u[b],k=g&&g.prototype;if(k&&(k[f]||c(k,f,p),k[l]||c(k,l,b),a[b]=p,m))for(d in r)k[d]||i(k,d,r[d],!0)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports={}},function(t,e){t.exports=!1},function(t,e,n){var i=n(25);t.exports=function(r,o,t){if(i(r),o===undefined)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}},function(t,e,n){var r=n(48),o=n(37);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(20),o=n(4),i="__core-js_shared__",u=o[i]||(o[i]={});(t.exports=function(t,e){return u[t]||(u[t]=e!==undefined?e:{})})("versions",[]).push({version:r.version,mode:n(27)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(9).f,o=n(14),i=n(1)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var o=n(6);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){var r=n(30)("keys"),o=n(23);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){function o(){}var i=r(5),u=r(71),c=r(37),a=r(36)("IE_PROTO"),s="prototype",f=function(){var t,e=r(42)("iframe"),n=c.length;for(e.style.display="none",r(55).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f[s][c[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(o[s]=i(t),n=new o,o[s]=null,n[a]=t):n=f(),e===undefined?n:u(n,e)}},function(t,e,n){var r=n(38),o=n(24),i=n(21),u=n(33),c=n(14),a=n(47),s=Object.getOwnPropertyDescriptor;e.f=n(10)?s:function(t,e){if(t=i(t),e=u(e,!0),a)try{return s(t,e)}catch(n){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(34);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(6),o=n(4).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(35),o=Math.min;t.exports=function(t){return 0<t?o(r(t),9007199254740991):0}},function(t,e,n){var o=n(31),i=n(1)("toStringTag"),u="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,n,r;return t===undefined?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:u?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(4),o=n(20),i=n(27),u=n(46),c=n(9).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||c(e,t,{value:u.f(t)})}},function(t,e,n){e.f=n(1)},function(t,e,n){t.exports=!n(10)&&!n(15)(function(){return 7!=Object.defineProperty(n(42)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var u=n(14),c=n(21),a=n(68)(!1),s=n(36)("IE_PROTO");t.exports=function(t,e){var n,r=c(t),o=0,i=[];for(n in r)n!=s&&u(r,n)&&i.push(n);for(;e.length>o;)u(r,n=e[o++])&&(~a(i,n)||i.push(n));return i}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(48),o=n(37).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){"use strict";var r=n(5);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";function g(){return this}var k=n(27),w=n(16),S=n(17),O=n(18),x=n(26),_=n(77),j=n(32),P=n(53),C=n(1)("iterator"),L=!([].keys&&"next"in[].keys()),E="values";t.exports=function(t,e,n,r,o,i,u){_(n,e,r);function c(t){if(!L&&t in y)return y[t];switch(t){case"keys":case E:return function(){return new n(this,t)}}return function(){return new n(this,t)}}var a,s,f,l=e+" Iterator",p=o==E,h=!1,y=t.prototype,v=y[C]||y["@@iterator"]||o&&y[o],d=v||c(o),b=o?p?c("entries"):d:undefined,m="Array"==e&&y.entries||v;if(m&&(f=P(m.call(new t)))!==Object.prototype&&f.next&&(j(f,l,!0),k||"function"==typeof f[C]||O(f,C,g)),p&&v&&v.name!==E&&(h=!0,d=function(){return v.call(this)}),k&&!u||!L&&!h&&y[C]||O(y,C,d),x[e]=d,x[l]=g,o)if(a={values:p?d:c(E),keys:i?d:c("keys"),entries:b},u)for(s in a)s in y||S(y,s,a[s]);else w(w.P+w.F*(L||h),e,a);return a}},function(t,e,n){var r=n(14),o=n(41),i=n(36)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){"use strict";n(11),n(12),n(8),n(19),n(0),n(2),n(3);function o(t,e,n){return(o=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function r(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}(t,[{key:"getEvent",value:function(){return event||window.event}},{key:"getTarget",value:function(t){return t.target||t.srcElement}},{key:"preventDefault",value:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},{key:"stopPropagation",value:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}},{key:"addHandler",value:function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}},{key:"removeHandler",value:function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=n}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||o(this,e),this.i}}]),t}(),a=n(13);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h="pressed",y=function(t){function o(t,e){var n;return function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=f(this,l(o).call(this))).game=t,n.pauseKeyCode=null,n.keyBinds={},n.processSettings(e),n.setup(),n}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,c),function r(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}(o,[{key:"setup",value:function(){var n=this,r=function r(t,e){n.keyBinds[t].actived||(e.down(),n.keyBinds[t].actived=!0)},o=function o(t,e){n.keyBinds[t].actived=!1,e.up()},t=document.querySelector("#button");this.addKBHandler(window,"keydown",h,r),this.addKBHandler(window,"keyup","",o);var e=Object(a.c)(),i=e?"touchstart":"mousedown",u=e?"touchend":"mouseup";this.addMouseHandler(t,i,h,r),this.addMouseHandler(t,u,"",o),this.addMouseHandler(t,"mouseout","",o)}},{key:"init",value:function(){for(var t in this.keyBinds)this.keyBinds[t]&&(this.keyBinds[t].actived=!1)}},{key:"setPauseKeyCode",value:function(t){this.pauseKeyCode=t.toString()}},{key:"processSettings",value:function(t){if(t){var e={};for(var n in t){var r=t[n],o=r.keyCode,i=r.sel;e[o]={component:document.querySelector(i),sceneControllers:{},actived:!1}}this.keyBinds=e}}},{key:"registerController",value:function(t,e){var n=this.keyBinds[t],r=this.game.sceneName;n||(n=this.keyBinds[t]={sceneControllers:{},actived:!1}),n.sceneControllers[r]=e}},{key:"addKBHandler",value:function(t,e,n,r){var o=this;this.game;this.addHandler(t,e,function(t){o.keyboardHandler(t,n,r)})}},{key:"keyboardHandler",value:function(t,e,n){var r=t.keyCode,o=this.game;if(r in this.keyBinds){var i=this.keyBinds[r],u=o.isPaused(),c=i.component,a=i.sceneControllers[o.sceneName];c&&(c.className=e),u&&r!=this.pauseKeyCode||!a||n(r,a)}}},{key:"addMouseHandler",value:function(t,e,n,r){var o=this;this.addHandler(window,e,function(t){o.mouseHandler(t,n,r)})}},{key:"mouseHandler",value:function(t,e,n){var r=this.getTarget(t),o=this.game.isPaused();for(var i in this.keyBinds){var u=this.keyBinds[i],c=u.component,a=u.sceneControllers[this.game.sceneName];if(c===r&&(c.className=e,(!o||i===this.pauseKeyCode)&&a))return n(i,a)}}}]),o}();function v(t,e,n){return(v=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&d(o,n.prototype),o}).apply(null,arguments)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return m});var m=function(){function r(t,e){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.canvas=document.querySelector(t),this.ctx=this.canvas.getContext("2d"),this.process=null,this.setupEventController(e),this.paused=!1,this.fps=30}return function o(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}(r,[{key:"setupEventController",value:function(t){this.eventCtrler=y.instance(this,t)}},{key:"setPauseKeyCode",value:function(t){this.eventCtrler.setPauseKeyCode(t)}},{key:"isPaused",value:function(){return this.paused}},{key:"registerAction",value:function(t,e){this.eventCtrler.registerController(t,e)}},{key:"removeAllActions",value:function(){this.eventCtrler.removeAllCallbacks()}},{key:"replaceScene",value:function(t,e){this.sceneName=e,this.scene=t.instance(this),this.eventCtrler.init()}},{key:"draw",value:function(){this.scene.draw()}},{key:"update",value:function(){this.scene.update()}},{key:"clear",value:function(){}},{key:"runloop",value:function(){var t=this;this.clear(),this.draw(),this.update(),this.process=setTimeout(function(){t.runloop()},1e3/this.fps)}},{key:"run",value:function(){var t=this;this.process=setTimeout(function(){t.runloop()},1e3/this.fps)}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||v(this,e),this.i}}]),r}()},function(t,e,n){var r=n(4).document;t.exports=r&&r.documentElement},function(t,e){t.exports=function(t,e,n){var r=n===undefined;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var r=n(76)(!0);n(52)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:undefined,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var p=n(28),r=n(16),h=n(41),y=n(59),v=n(60),d=n(43),b=n(78),m=n(61);r(r.S+r.F*!n(62)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,o,i=h(t),u="function"==typeof this?this:Array,c=arguments.length,a=1<c?arguments[1]:undefined,s=a!==undefined,f=0,l=m(i);if(s&&(a=p(a,2<c?arguments[2]:undefined,2)),l==undefined||u==Array&&v(l))for(n=new u(e=d(i.length));f<e;f++)b(n,f,s?a(i[f],f):i[f]);else for(o=l.call(i),n=new u;!(r=o.next()).done;f++)b(n,f,s?y(o,a,[r.value,f],!0):r.value);return n.length=f,n}})},function(t,e,n){var u=n(5);t.exports=function(t,e,n,r){try{return r?e(u(n)[0],n[1]):e(n)}catch(i){var o=t["return"];throw o!==undefined&&u(o.call(t)),i}}},function(t,e,n){var r=n(26),o=n(1)("iterator"),i=Array.prototype;t.exports=function(t){return t!==undefined&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(44),o=n(1)("iterator"),i=n(26);t.exports=n(20).getIteratorMethod=function(t){if(t!=undefined)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var i=n(1)("iterator"),u=!1;try{var r=[7][i]();r["return"]=function(){u=!0},Array.from(r,function(){throw 2})}catch(c){}t.exports=function(t,e){if(!e&&!u)return!1;var n=!1;try{var r=[7],o=r[i]();o.next=function(){return{done:n=!0}},r[i]=function(){return o},t(r)}catch(c){}return n}},function(t,e,n){"use strict";var r=n(79),o=n(80),i=n(26),u=n(21);t.exports=n(52)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=undefined,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){t.exports=n(30)("native-function-to-string",Function.toString)},function(t,e,n){function r(t){c(t,o,{value:{i:"O"+ ++a,w:{}}})}var o=n(23)("meta"),i=n(6),u=n(14),c=n(9).f,a=0,s=Object.isExtensible||function(){return!0},f=!n(15)(function(){return s(Object.preventExtensions({}))}),l=t.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,o)){if(!s(t))return"F";if(!e)return"E";r(t)}return t[o].i},getWeak:function(t,e){if(!u(t,o)){if(!s(t))return!0;if(!e)return!1;r(t)}return t[o].w},onFreeze:function(t){return f&&l.NEED&&s(t)&&!u(t,o)&&r(t),t}}},function(t,e,n){var c=n(29),a=n(49),s=n(38);t.exports=function(t){var e=c(t),n=a.f;if(n)for(var r,o=n(t),i=s.f,u=0;o.length>u;)i.call(t,r=o[u++])&&e.push(r);return e}},function(t,e,n){var r=n(31);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var a=n(21),s=n(43),f=n(69);t.exports=function(c){return function(t,e,n){var r,o=a(t),i=s(o.length),u=f(n,i);if(c&&e!=e){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((c||u in o)&&o[u]===e)return c||u||0;return!c&&-1}}},function(t,e,n){var r=n(35),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(31);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var u=n(9),c=n(5),a=n(29);t.exports=n(10)?Object.defineProperties:function(t,e){c(t);for(var n,r=a(e),o=r.length,i=0;i<o;)u.f(t,n=r[i++],e[n]);return t}},function(t,e,n){var r=n(21),o=n(50).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(e){return u.slice()}}(t):o(r(t))}},function(t,e,o){function i(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var n=o(6),r=o(5);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=o(28)(Function.call,o(40).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(e){n=!0}return function(t,e){return i(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):undefined),check:i}},function(t,e,n){n(10)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(51)})},function(t,e,n){"use strict";var i=n(25),u=n(6),c=n(56),a=[].slice,s={};t.exports=Function.bind||function(e){var n=i(this),r=a.call(arguments,1),o=function(){var t=r.concat(a.call(arguments));return this instanceof o?function(t,e,n){if(!(e in s)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)}(n,t.length,t):c(n,t,e)};return u(n.prototype)&&(o.prototype=n.prototype),o}},function(t,e,n){var a=n(35),s=n(34);t.exports=function(c){return function(t,e){var n,r,o=String(s(t)),i=a(e),u=o.length;return i<0||u<=i?c?"":undefined:(n=o.charCodeAt(i))<55296||56319<n||i+1===u||(r=o.charCodeAt(i+1))<56320||57343<r?c?o.charAt(i):n:c?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(39),o=n(24),i=n(32),u={};n(18)(u,n(1)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(9),o=n(24);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var r=n(1)("unscopables"),o=Array.prototype;o[r]==undefined&&n(18)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(40),u=n(53),c=n(14),r=n(16),a=n(6),s=n(5);r(r.S,"Reflect",{get:function f(t,e){var n,r,o=arguments.length<3?t:arguments[2];return s(t)===o?t[e]:(n=i.f(t,e))?c(n,"value")?n.value:n.get!==undefined?n.get.call(o):undefined:a(r=u(t))?f(r,e,o):void 0}})},,,,,,,,,,,function(t,e,n){t.exports=n(112)},function(t,e,n){"use strict";var r=n(16),o=n(25),i=n(41),u=n(15),c=[].sort,a=[1,2,3];r(r.P+r.F*(u(function(){a.sort(undefined)})||!u(function(){a.sort(null)})||!n(94)(c)),"Array",{sort:function(t){return t===undefined?c.call(i(this)):c.call(i(this),o(t))}})},function(t,e,n){"use strict";var r=n(15);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(2),n(3),n(0);var i=n(54);n(11),n(12),n(8),n(19);function o(t,e,n){return(o=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.component=document.querySelector(t)}return function r(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}(e,[{key:"setState",value:function(t){this.component.className=t}}],[{key:"new",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(this,e)}}]),e}();function s(t,e,n){return(s=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function r(t,e){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.numElts=document.querySelectorAll(t),e&&(this.titleCpn=document.querySelector(e))}return function o(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}(r,[{key:"setTitle",value:function(t){this.titleCpn.innerText=t}},{key:"getNumber",value:function(){for(var t,e,n,r=0,o=this.numElts.length-1;0<=o;o--)t=""==(e=this.numElts[o].className)?0:e[e.length-1],n=parseInt(t),isNaN(n)||(r=10*r+n);return r}},{key:"setNumber",value:function(t){for(var e,n=this.numElts.length,r=0;r<n&&0<t;r++)e=t%10,this.setDigit(e,this.numElts[r]),t=(t-e)/10;for(0==r&&(this.setDigit(0,this.numElts[0]),r++);r<n;r++)this.setDigit(null,this.numElts[r])}},{key:"setDigit",value:function(t,e){e.className=null==t?"":"n"+t}}],[{key:"new",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(this,e)}}]),r}(),h=[[[0,0],[1,0],[2,0],[3,0]],[[0,0],[0,1],[1,0],[1,1]],[[0,1],[1,0],[1,1],[2,1]],[[0,0],[0,1],[1,1],[2,1]],[[0,1],[1,1],[2,0],[2,1]],[[0,0],[1,0],[1,1],[2,1]],[[0,1],[1,0],[1,1],[2,0]]],y=[100,300,500,800],v=[800,650,500,400,300,200],d=[50,60,70,80,90,100],b={rotate:{keyCode:38,sel:"#rotate_btn"},speedUp:{keyCode:40,sel:"#down_btn"},left:{keyCode:37,sel:"#left_btn"},right:{keyCode:39,sel:"#right_btn"},drop:{keyCode:32,sel:"#drop_btn"},pause:{keyCode:80,sel:"#pause_btn"},reset:{keyCode:82,sel:"#reset_btn"}},m="unpaused",g="rgb(135, 147, 100)",k="rgb(0, 0, 0)",w="rgb(180, 0, 0)";function S(t,e,n){return(S=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&O(o,n.prototype),o}).apply(null,arguments)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.setup()}return function r(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}(e,[{key:"setup",value:function(){var t=this;this.hourBoard=p["new"]("#s_hour span"),this.minuteBoard=p["new"]("#s_minute span"),this.indicator=a["new"]("#s_clock_indi");var e=new Date;this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),this.hourBoard.setNumber(this.hours),this.minuteBoard.setNumber(this.minutes),setInterval(function(){t.update()},1e3)}},{key:"update",value:function(){60==++this.seconds&&(this.seconds=0,60==++this.minutes&&(this.minutes=0,24==++this.hours&&(this.hours=0),this.hourBoard.setNumber(this.hours)),this.minuteBoard.setNumber(this.minutes));var t=this.seconds%2==0?"tik":"tok";this.indicator.setState(t)}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||S(this,e),this.i}}]),e}();function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e,n){return(j=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&E(o,n.prototype),o}).apply(null,arguments)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(){var t;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=C(this,L(e).call(this,"#s_psign"))).process=null,t.paused=!1,t.count=0,t}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,a),function r(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}(e,[{key:"pause",value:function(){var t=this;this.paused=!0,this.process=setInterval(function(){t.count++%2==0?t.setState("paused"):t.setState(m)},250)}},{key:"unpause",value:function(){this.paused=!1,this.count=0,this.setState(m),clearInterval(this.process)}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||j(this,e),this.i}}]),e}();function T(t,e,n){return(T=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&A(o,n.prototype),o}).apply(null,arguments)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M="tetris-last-record",N="tetris-max-record",F=function(){function t(){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=this.getLocalStorage()}return function r(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),t}(t,[{key:"getLocalStorage",value:function(){return"object"==("undefined"==typeof localStorage?"undefined":B(localStorage))?localStorage:"object"==("undefined"==typeof globalStorage?"undefined":B(globalStorage))?globalStorage[location.host]:(console.warn("Local storage not available. Your record will be forgot after leave"),{})}},{key:"getRecord",value:function(t){var e=parseInt(this.storage[t]);return isNaN(e)?0:e}},{key:"setRecord",value:function(t,e){this.storage[t]=e}},{key:"getLastRecord",value:function(){return this.getRecord(M)}},{key:"setLastRecord",value:function(t){this.setRecord(M,t)}},{key:"getMaxRecord",value:function(){return this.getRecord(N)}},{key:"setMaxRecord",value:function(t){this.setRecord(N,t)}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||T(this,e),this.i}}]),t}();function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.board=[],this.scoring=!1,this.process=null,this.count=0,this["default"]()}return function r(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}(e,[{key:"default",value:function(){this.row=20,this.column=10,this.defaultColor=g,this.indicateColor=w,this.fullLinesEchoSpeed=15,this.fullLinesEchoTimes=3}},{key:"init",value:function(){for(var t=this.row,e=0;e<t;e++){this.board[e]=[];for(var n=this.board[e],r=0;r<this.column;r++)n[r]={color:this.defaultColor,occupied:!1}}}},{key:"setPresetLines",value:function(t){this.generateRandomRows(t)}},{key:"setLine",value:function(t,e,n){for(var r=this.board[t],o=0;o<this.column;o++){var i=r[o];i.color=e,i.occupied=n}}},{key:"generateRandomRows",value:function(t){for(var e=this.row-t,n=this.row-1;e<=n;n--){for(var r=this.board[n],o=this.column-1;0<=o;o--){var i=r[o],u=Math.random()<=.6;i.color=u?k:g,i.occupied=u}if(this.lineIsFull(r)){var c=r[Math.floor(10*Math.random())];c.color=g,c.occupied=!1}}}},{key:"lineIsFull",value:function(t){return t.map(function(t){return t.occupied}).reduce(function(t,e){return t&&e})}},{key:"setUpScoreRule",value:function(e){this.scoreFunc=function(t){e&&e(t)}}},{key:"draw",value:function(){for(var t=this.game,e=0;e<this.row;e++)for(var n=0;n<this.column;n++)t.drawBlock(n,e,this.board[e][n].color)}},{key:"update",value:function(){for(var t=[],e=0;e<this.row;e++)this.lineIsFull(this.board[e])&&t.push(e);0<t.length&&(this.scoring=!0,this.lines=t,this.score())}},{key:"score",value:function(){var t=this;this.scoring=!0,this.process=setInterval(function(){t.echoFullLines()},1e3/this.fullLinesEchoSpeed)}},{key:"echoFullLines",value:function(){var e=this;if(!this.game.isPaused()){if(this.count++>2*this.fullLinesEchoTimes-1)return this.count=0,this.scoring=!1,clearInterval(this.process),void this.clearFullLines();var n=this.count%2==0?this.defaultColor:this.indicateColor;this.lines.map(function(t){e.setLine(t,n,!1)})}}},{key:"clearFullLines",value:function(){var n=this,t=this.lines;t.forEach(function(t){var e=n.board.splice(t,1)[0];n.board.unshift(e)}),this.scoreFunc(t.length),this.lines=null}}],[{key:"instance",value:function(t){return this.i=this.i||new this(t),this.i}}]),e}();n(22);function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.elements=[],this.setup()}return function r(t,e,n){return e&&G(t.prototype,e),n&&G(t,n),t}(e,[{key:"setup",value:function(){}},{key:"init",value:function(){}},{key:"draw",value:function(){var t=!0,e=!1,n=undefined;try{for(var r,o=this.elements[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.draw()}}catch(i){e=!0,n=i}finally{try{t||null==o["return"]||o["return"]()}finally{if(e)throw n}}}},{key:"update",value:function(){}},{key:"pushElement",value:function(t){this.elements.push(t)}}],[{key:"instance",value:function(t){return this.i=this.i||new this(t),this.i.init(),this.i}}]),e}();n(93),n(81);function z(t,e,n){return(z=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&U(o,n.prototype),o}).apply(null,arguments)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.querySelector(t),this.ctx=this.canvas.getContext("2d")}return function r(t,e,n){return e&&K(t.prototype,e),n&&K(t,n),t}(e,[{key:"drawBlock",value:function(t,e,n,r){var o=n/15,i=n/10,u=this.ctx;u.fillStyle=r;var c=n*t+o,a=n*e+o,s=n-2*o;u.fillRect(c,a,s,s),c+=o,a+=o,s-=2*o,u.clearRect(c,a,s,s),s-=2*i,u.fillRect(c+i,a+i,s,s)}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||z(this,e),this.i}}]),e}(),V=n(13);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Q(t,e,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt=function(t){function r(t){var e;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=X(this,Z(r).call(this,"#next canvas"))).game=t,e["default"](),e}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(r,q),function o(t,e,n){return e&&J(t.prototype,e),n&&J(t,n),t}(r,[{key:"next",value:function(){this.coors=this.randBlockType();var t=Object(V.b)(this.coors,0);this.offsetX=1==t?1:2==t?.5:0,this.offsetY=0==Object(V.b)(this.coors,1)?.5:0}},{key:"default",value:function(){this.color=k}},{key:"drawBlock",value:function(t,e){Q(Z(r.prototype),"drawBlock",this).call(this,t,e,this.game.blockSize,this.color)}},{key:"randBlockType",value:function(){var t=h;return t[Math.floor(Math.random()*t.length)]}},{key:"draw",value:function(){var t=this.coors,e=this.offsetX,n=this.offsetY,r=!0,o=!1,i=undefined;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var a=u.value;this.drawBlock(a[0]+e,a[1]+n)}}catch(s){o=!0,i=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(o)throw i}}}},{key:"clear",value:function(){var t=this.canvas;this.ctx.clearRect(0,0,t.width,t.height)}}]),r}();function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt=function(){function e(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.maxLevel=v.length,this["default"](),this.setup()}return function r(t,e,n){return e&&et(t.prototype,e),n&&et(t,n),t}(e,[{key:"default",value:function(){this.x=0,this.y=0,this.defaultColor=k,this.indicateColor=w}},{key:"setup",value:function(){this.preview=tt.instance(this.game),this.preview.next()}},{key:"init",value:function(){var t=this.preview;this.coors=t.coors,t.next(),t.clear(),t.draw(),this.x=3,this.y=-Object(V.b)(this.coors,1)-1,this.color=this.defaultColor,this.updateCD=this.maxUpdateCD,this.retired=!1}},{key:"setLevel",value:function(t){this.level=t;var e=this.game.fps,n=v[this.level-1];this.maxUpdateCD=Math.floor(e*n/1e3),this.updateCD=this.maxUpdateCD;var r=d[this.level-1];this.delay=Math.floor(e*r/1e3)}},{key:"updateLevel",value:function(){if(this.level<this.maxLevel){var t=this.level+1;this.setLevel(t),this.game.setLevel(t)}}},{key:"move",value:function(t){if(!this.retired){var e=this.game.area;Object(V.a)(this.x+t,this.y,this.coors,e)?this.updateCD+=Math.round(this.delay/2):(this.x+=t,this.updateCD+=this.delay),this.updateCD>this.maxUpdateCD&&(this.updateCD=this.maxUpdateCD)}}},{key:"moveLeft",value:function(){this.move(-1)}},{key:"moveRight",value:function(){this.move(1)}},{key:"rotate",value:function(){if(!this.retired){var t=this.rotateCoors(this.coors),e=this.game.area,n=Object(V.b)(t,0),r=this.getOptionalOffsets(n),o=!0,i=!1,u=undefined;try{for(var c,a=r[Symbol.iterator]();!(o=(c=a.next()).done);o=!0){var s=c.value;if(!Object(V.a)(this.x+s,this.y,t,e))return this.coors=t,void(this.x+=s)}}catch(f){i=!0,u=f}finally{try{o||null==a["return"]||a["return"]()}finally{if(i)throw u}}}}},{key:"rotateCoors",value:function(t){var e=t.map(function(t){return[-t[1],t[0]]}),n=e.sort(function(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]})[0],r=n[0],o=n[1];return 3===Object(V.b)(t,0)&&(r-=1,o+=1),e.map(function(t){return[t[0]-r,t[1]-o]})}},{key:"getOptionalOffsets",value:function(t){for(var e=[0],n=1;n<=t;n++)e.push(n,-n);return e}},{key:"drop",value:function(){if(!this.game.area.scoring)for(;!this.retired;)this.updateY()}},{key:"occupy",value:function(){var t=this.game.area.board,e=!0,n=!1,r=undefined;try{for(var o,i=this.coors[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=o.value;try{var c=t[this.y+u[1]][this.x+u[0]];c.occupied=!0,c.color=this.defaultColor}catch(a){}}}catch(s){n=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw r}}}},{key:"retire",value:function(){this.retired=!0,this.color=this.indicateColor}},{key:"isBlocked",value:function(){var t=this.game.area,e=!0,n=!1,r=undefined;try{for(var o,i=this.coors[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=o.value;try{if(this.y+u[1]+1===t.row||t.board[this.y+u[1]+1][this.x+u[0]].occupied)return!0}catch(c){}}}catch(c){n=!0,r=c}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw r}}return!1}},{key:"draw",value:function(){var t=this.game,e=!0,n=!1,r=undefined;try{for(var o,i=this.coors[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=o.value;t.drawBlock(this.x+u[0],this.y+u[1],this.color)}}catch(c){n=!0,r=c}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw r}}}},{key:"updateY",value:function(){this.isBlocked()?this.retire():this.y++}},{key:"update",value:function(){this.updateCD<=0?(this.updateCD=this.maxUpdateCD,this.updateY()):this.updateCD--}}],[{key:"instance",value:function(t){return this.i=this.i||new this(t),this.i}}]),e}(),rt=n(7);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=function(t){function e(){return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ut(this,ct(e).apply(this,arguments))}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,W),function r(t,e,n){return e&&it(t.prototype,e),n&&it(t,n),t}(e,[{key:"setup",value:function(){var e=this,n=this,t=this.game,r=t.area;this.bc=nt.instance(t),this.pushElement(r),this.pushElement(this.bc),r.setUpScoreRule(function(t){e.countScore(t)});var o=b.left.keyCode;t.registerAction(o,rt.a["new"]({key:"left",begin:200,interval:100,callback:function(){n.bc.moveLeft()}}));var i=b.right.keyCode;t.registerAction(i,rt.a["new"]({key:"right",begin:200,interval:100,callback:function(){n.bc.moveRight()}}));var u=b.speedUp.keyCode;t.registerAction(u,rt.a["new"]({key:"speedUp",callback:function(t){n.bc.retired?t():n.bc.updateCD=-10}}));var c=b.rotate.keyCode;t.registerAction(c,rt.a["new"]({key:"rotate",once:!0,callback:function(){n.bc.rotate()}}));var a=b.drop.keyCode;t.registerAction(a,rt.a["new"]({key:"drop",once:!0,callback:function(){n.bc.drop()}}));var s=b.reset.keyCode;t.registerAction(s,rt.a["new"]({key:"reset",once:!0,callback:function(){n.resetGame()}}));var f=b.pause.keyCode;t.registerAction(f,rt.a["new"]({key:"pause",once:!0,callback:function(){t.isPaused()?t.unpause():t.pause()}})),t.setPauseKeyCode(f)}},{key:"init",value:function(){this.levelInit(),this.lineInit(),this.bc.init()}},{key:"levelInit",value:function(){var t=this.game.getLevel();this.bc.setLevel(t),this.eachBlockScore=10+2*(t-1)}},{key:"lineInit",value:function(){var t=this.game,e=t.getLines();t.area.setPresetLines(e),t.setLineBoardTitle("Cleans"),t.setLines(0),t.setScoreBoardTitle("Points"),t.setScore(0),this.clearLines=0}},{key:"addScore",value:function(t){var e=this.game,n=e.getScore();e.setScore(t+n)}},{key:"countScore",value:function(t){if(0<t){var e=this.game,n=t+e.getLines();e.setLines(n),this.addScore(y[t-1]),this.clearLines+=t,20<=this.clearLines&&(this.clearLines-=20,this.bc.updateLevel(),this.eachBlockScore+=2)}}},{key:"resetGame",value:function(){var t=this.game;t.replaceScene(wt,"Reset");var e=t.storage,n=e.getMaxRecord(),r=t.scoreBoard.getNumber();n<r&&e.setMaxRecord(r),e.setLastRecord(r)}},{key:"update",value:function(){var t=this.bc,e=this.game,n=e.area;e.isPaused()||n.scoring||(t.retired?t.y<0?this.resetGame():(t.occupy(),this.addScore(this.eachBlockScore),n.update(),t.init()):t.update())}}]),e}();function ft(t){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e){return!e||"object"!==ft(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function r(t){var e;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=pt(this,ht(r).call(this,t))).title=document.querySelector("#title"),e.showGap=Math.floor(.75*t.fps),e.scoreShowGap=2*t.fps,e.count=0,e.titleType=1,e.startLevel=1,e.maxLevel=v.length,e.startLines=0,e.maxStartLines=10,e}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(r,W),function o(t,e,n){return e&&lt(t.prototype,e),n&&lt(t,n),t}(r,[{key:"setup",value:function(){var t=this.game,e=this,n=b.drop.keyCode;t.registerAction(n,rt.a["new"]({key:"drop",begin:250,interval:150,callback:function(){e.startGame()}}));var r=b.left.keyCode;t.registerAction(r,rt.a["new"]({key:"left",begin:250,interval:150,callback:function(){e.updateLevel(-1)}}));var o=b.right.keyCode;t.registerAction(o,rt.a["new"]({key:"right",begin:250,interval:150,callback:function(){e.updateLevel(1)}}));var i=b.rotate.keyCode;t.registerAction(i,rt.a["new"]({key:"up",begin:250,interval:150,callback:function(){e.updateLines(1)}}));var u=b.speedUp.keyCode;t.registerAction(u,rt.a["new"]({key:"down",begin:250,interval:150,callback:function(){e.updateLines(-1)}}))}},{key:"init",value:function(){var t=this.game;t.setLevel(this.startLevel),t.setLineBoardTitle("Start lines"),t.setLines(this.startLines),t.area.draw()}},{key:"startGame",value:function(){this.game.replaceScene(st,"main"),this.title.style.visibility="hidden"}},{key:"update",value:function(){var t=this.title,e=this.game;if(this.count%this.showGap==0){var n="visible"==t.style.visibility;t.style.visibility=n?"hidden":"visible"}if(this.count%this.scoreShowGap==0){var r=e.scoreBoard,o=e.storage;this.titleType?(r.setTitle("Max"),r.setNumber(o.getMaxRecord())):(r.setTitle("Last Round"),r.setNumber(o.getLastRecord())),this.titleType=!this.titleType}this.count++}},{key:"updateLevel",value:function(t){var e=this.startLevel+t;e<1?e+=this.maxLevel:e>this.maxLevel&&(e-=this.maxLevel),this.game.setLevel(e),this.startLevel=e}},{key:"updateLines",value:function(t){var e=this.startLines+t;e<0?e+=this.maxStartLines+1:e>this.maxStartLines&&(e-=this.maxStartLines+1),this.game.setLines(e),this.startLines=e}}]),r}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t){return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,gt(e).call(this,t))}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,W),function r(t,e,n){return e&&bt(t.prototype,e),n&&bt(t,n),t}(e,[{key:"setup",value:function(){this.pushElement(this.game.area)}},{key:"init",value:function(){this.index=19,this.update=this.fillArea}},{key:"fillArea",value:function(){this.game.area.setLine(this.index,k,!1),--this.index<0&&(this.index=0,this.update=this.clearArea)}},{key:"clearArea",value:function(){this.game.area.setLine(this.index,g,!1),20==++this.index&&this.restartGame()}},{key:"restartGame",value:function(){this.game.replaceScene(vt,"title")}}]),e}();function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function n(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pt=function(t){function r(t){var e;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=xt(this,_t(r).call(this,"#area",b))).blockSize=e.canvas.width/10,e.callbackRun=t,e.getComponents(),e.__start(),e._fps=45,e.debug(),e}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(r,i["a"]),function o(t,e,n){return e&&Ot(t.prototype,e),n&&Ot(t,n),t}(r,[{key:"debug",value:function(){var t=this,e=document.querySelector("#debug"),n=document.createElement("input");n.type="range",n.max=250,n.min=30,n.valueAsNumber=this.fps,n.addEventListener("change",function(){t.fps=n.valueAsNumber,r.innerText=t.fps});var r=document.createElement("span");r.innerText=this.fps,e.innerHTML="",e.append(n,"fps：",r)}},{key:"getComponents",value:function(){this.clock=_.instance(),this.storage=F.instance(),this.scoreBoard=p["new"]("#point span","#point p"),this.lineCountBoard=p["new"]("#lines span","#lines p"),this.levelBoard=p["new"]("#level span"),this.pauseSign=R.instance(),this.area=I.instance(this),this.area.init()}},{key:"isPaused",value:function(){return this.pauseSign.paused}},{key:"pause",value:function(){this.pauseSign.pause()}},{key:"unpause",value:function(){this.pauseSign.unpause()}},{key:"setLineBoardTitle",value:function(t){this.lineCountBoard.setTitle(t)}},{key:"setScoreBoardTitle",value:function(t){this.scoreBoard.setTitle(t)}},{key:"getLines",value:function(){return this.lineCountBoard.getNumber()}},{key:"setLines",value:function(t){this.lineCountBoard.setNumber(t)}},{key:"getLevel",value:function(){return this.levelBoard.getNumber()}},{key:"setLevel",value:function(t){this.levelBoard.setNumber(t)}},{key:"getScore",value:function(){return this.scoreBoard.getNumber()}},{key:"setScore",value:function(t){this.scoreBoard.setNumber(t)}},{key:"drawBlock",value:function(t,e,n){var r=this.blockSize,o=r/15,i=r/10,u=this.ctx;u.fillStyle=n;var c=r*t+o,a=r*e+o,s=r-2*o;u.fillRect(c,a,s,s),c+=o,a+=o,s-=2*o,u.clearRect(c,a,s,s),s-=2*i,u.fillRect(c+i,a+i,s,s)}},{key:"__start",value:function(){this.replaceScene(wt),this.callbackRun(this)}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps=t}}]),r}();function Ct(t,e,n){return(Ct=function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Lt(o,n.prototype),o}).apply(null,arguments)}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rt=function(){function t(){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=document.querySelector("#root"),this.game=document.querySelector("#game"),this.button=document.querySelector("#button"),this.curW=440,this.curH=677,this.aspectRatio=this.curW/this.curH,this.process=null}return function r(t,e,n){return e&&Et(t.prototype,e),n&&Et(t,n),t}(t,[{key:"getBrowserInterfaceSize",value:function(){var t=window.innerWidth,e=window.innerHeight;return"number"!=typeof t&&(e="CSS1Compat"==document.compatMode?(t=document.documentElement.clientWidth,document.documentElement.clientHeight):(t=document.body.clientWidth,window.body.clientHeight)),{pageWidth:t,pageHeight:e}}},{key:"resize",value:function(){var t=this.root,e=this.game,n=this.button,r=this.getBrowserInterfaceSize(),o=r.pageWidth,i=r.pageHeight;if(i!=this.curH){var u=i/677,c=u-1,a=("scale(".concat(u,")"),440*u);if(i<this.curH&&a<this.curW||i>this.curH||a>this.curW){t.style.width="".concat(a,"px"),this.curW=a;var s=220*c;e.style.transform="scale(".concat(u,")"),n.style.transform="scale(".concat(u,")"),e.style.marginLeft=50+s+"px",n.style.marginLeft=s+"px"}e.style.marginTop=200*c+30*u+"px",n.style.marginTop=225*c+"px",this.process=null,this.curH=i}if(o<this.curH*this.aspectRatio){if(t.style.width="100%",o==this.curW)return;var f=o/440,l=f-1,p="scale(".concat(f,")");e.style.transform=n.style.transform=p,e.style.marginLeft="".concat(220*l+50,"px"),n.style.marginLeft="".concat(220*l,"px"),this.curW=o}else t.style.width="".concat(i*this.aspectRatio,"px")}}],[{key:"instance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.i=this.i||Ct(this,e),this.i}}]),t}();n(95);window.onload=function(){if(Object(V.c)()){var t={passive:!1};document.body.style.fontSize="12px",document.documentElement.addEventListener("touchstart",function(t){t.preventDefault()},t);var n=0;document.documentElement.addEventListener("touchend",function(t){var e=Date.now();e-n<=300&&t.preventDefault(),n=e},t),document.documentElement.addEventListener("touchmove",function(t){t.preventDefault()},t)}var e=Rt.instance();e.resize(),window.onresize=function(){e.resize()};Pt.instance(function(t){t.run()})}}]);
//# sourceMappingURL=tetris-1.0.0.js.map